<h3><%= current_user.username %> </h3>
<p><%= link_to "Modifier mes informations", edit_user_registration_path %></p>
<div>
  <% if current_user.photo? %>
    <%= cl_image_tag current_user.photo, height: 200, width: 200, crop: :fill %>
  <% end %>
</div>

<% unless @composts.empty? %>
  <h4>Mes Composts</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th scope="col">Point de rdv</th>
        <th scope="col">Description</th>
        <th scope="col">Modifier?</th>
        <th scope="col">Supprimer?</th>
      </tr>
    </thead>
    <tbody>
      <% @composts.each do |compost| %>
        <tr>
          <td><%= compost.address %></td>
          <td><%= compost.description %></td>
          <td><%= link_to "#", "data-toggle": 'modal', "data-target": "#updateCompost#{compost.id}" do %>
                <%= icon('fas', 'pencil-alt') %>
            <% end %>
          </td>
          <td>
            <%= link_to remove_compost_path(compost) do %>
              <%= icon('fas', 'trash') %>
            <% end %>
          </td>
        </tr>

      <% end %>
    </tbody>
  </table>
<% end %>

<%= link_to "Ajouter un compost", "#", "data-toggle": 'modal', "data-target": "#newCompost"%>

<% unless @conversations.empty? %>
  <h4>Mes Conversations</h4>
  <h5>Conversations sur mes composts</h5>
  <% if @compost_conversations.empty? %>
    <p><i>Aucune conversation</i></p>
  <% else %>
    <ul>
      <% @compost_conversations.each do |c| %>
        <li> <%= c.compost.address %> /
          <%= c.user == current_user ? c.compost.user.username : c.user.username %>
          <%= link_to conversation_messages_path(c) do %>
            <%= icon('far', 'comments') %>
          <% end %>

          </li>
      <% end %>
    </ul>
    <br>
  <% end %>
  <h5>Autres conversations</h5>
  <% if @user_conversations.empty? %>
    <p><i>Aucune conversation</i></p>
  <% else %>
    <ul>
      <% @user_conversations.each do |c| %>
        <li> <%= c.compost.address %> /
          <%= c.user == current_user ? c.compost.user.username : c.user.username %>
          <%= link_to conversation_messages_path(c) do %>
            <%= icon('far', 'comments') %>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>
<% end %>

<!-- <h4>Ajouter un Compost</h4>
<table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">Point de rdv</th>
      <th scope="col">Description</th>
      <th scope="col">Cr√©er</th>
    </tr>
  </thead>
  <tbody>
    <%#= simple_form_for @compost do |f|%>
      <tr>
        <td><%#= f.input :address, label: false %></td>
        <td><%#= f.input :description, label: false %></td>
        <td><%#= f.submit "OK" %></td>
      </tr>
    <%# end %>
  </tbody>
</table> -->

<!-- Update Modal -->
<% @composts.each do |compost| %>
  <div class="modal fade" id="updateCompost<%=compost.id%>" tabindex="-1" role="dialog" aria-labelledby="updateLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="updateLabel">Modifier les informations du compost</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <%= render 'form', compost: compost %>
        </div>
       <!--  <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div> -->
      </div>
    </div>
  </div>
<% end %>

<!-- New Modal -->
 <div class="modal fade" id="newCompost" tabindex="-1" role="dialog" aria-labelledby="updateLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="updateLabel">Ajouter votre compost</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <%= render 'form', compost: @compost %>
        </div>
        <!-- <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div> -->
      </div>
    </div>
  </div>
